class BrowserDetector{constructor(){this.info=this.detectBrowser();this.compatibility=this.checkCompatibility();}detectBrowser(){const ua=navigator.userAgent;const info={name:'Unknown',version:'Unknown',os:'Unknown',engine:'Unknown',userAgent:ua};if(ua.indexOf('Win')!==-1)info.os='Windows';else if(ua.indexOf('Mac')!==-1)info.os='macOS';else if(ua.indexOf('Linux')!==-1)info.os='Linux';else if(ua.indexOf('Android')!==-1)info.os='Android';else if(ua.indexOf('iOS')!==-1||ua.indexOf('iPhone')!==-1||ua.indexOf('iPad')!==-1)info.os='iOS';if(ua.indexOf('Edg/')!==-1){info.name='Edge';info.engine='Chromium';const match=ua.match(/Edg\/(\d+\.\d+)/);if(match)info.version=match[1];}else if(ua.indexOf('Chrome')!==-1&&ua.indexOf('Edg')===-1){info.name='Chrome';info.engine='Chromium';const match=ua.match(/Chrome\/(\d+\.\d+)/);if(match)info.version=match[1];}else if(ua.indexOf('Firefox')!==-1){info.name='Firefox';info.engine='Gecko';const match=ua.match(/Firefox\/(\d+\.\d+)/);if(match)info.version=match[1];}else if(ua.indexOf('Safari')!==-1&&ua.indexOf('Chrome')===-1){info.name='Safari';info.engine='WebKit';const match=ua.match(/Version\/(\d+\.\d+)/);if(match)info.version=match[1];}else if(ua.indexOf('Opera')!==-1||ua.indexOf('OPR')!==-1){info.name='Opera';info.engine='Chromium';const match=ua.match(/(?:Opera|OPR)\/(\d+\.\d+)/);if(match)info.version=match[1];}return info;}checkCompatibility(){const hasSerialAPI='serial' in navigator;const isSecureContext=window.isSecureContext;let status='unsupported';let message='';let recommendation='';if(!isSecureContext){status='error';message='Insecure context detected. Web Serial API requires HTTPS or localhost.';recommendation='Please access this page via HTTPS or localhost.';}else if(!hasSerialAPI){status='unsupported';if(this.info.name==='Firefox'){message='Firefox does not support the Web Serial API.';recommendation='Please use Chrome, Edge, or Opera (version 89+).';}else if(this.info.name==='Safari'){message='Safari does not support the Web Serial API.';recommendation='Please use Chrome, Edge, or Opera (version 89+).';}else if(this.info.os==='iOS'||this.info.os==='Android'){message='Mobile browsers do not support the Web Serial API.';recommendation='Please use a desktop browser (Chrome, Edge, or Opera).';}else{message='Your browser does not support the Web Serial API.';recommendation='Please update to the latest version of Chrome, Edge, or Opera.';}}else{status='supported';message='Web Serial API is supported.';recommendation='';}return {hasSerialAPI,isSecureContext,status,message,recommendation};}getMinimumVersions(){return {'Chrome':'89','Edge':'89','Opera':'75'};}meetsMinimumVersion(){const minVersions=this.getMinimumVersions();const currentVersion=parseFloat(this.info.version);const minVersion=parseFloat(minVersions[this.info.name]);if(!minVersion)return false;return currentVersion>=minVersion;}getReport(){return {browser:this.info,compatibility:this.compatibility,minimumVersions:this.getMinimumVersions(),meetsMinimum:this.meetsMinimumVersion()};}generateInfoHTML(){const report=this.getReport();const statusClass=report.compatibility.status==='supported'?'success':'error';const statusIcon=report.compatibility.status==='supported'?'‚úì':'‚úó';let html=`<div class="browser-info" style="margin: 10px 0; padding: 10px; background: #2a2a2a; border: 1px solid #444; border-radius: 4px; font-family: monospace; font-size: 0.9em;"><div style="margin-bottom: 8px;"><strong>Browser:</strong>${report.browser.name}${report.browser.version}(${report.browser.os})</div><div style="margin-bottom: 8px;"><strong>Status:</strong><span class="status-${statusClass}" style="color: ${statusClass === 'success' ? '#00e676' : '#ff5252'};">${statusIcon}${report.compatibility.message}</span></div>`;if(report.compatibility.recommendation){html+=`<div style="margin-top: 8px; padding: 8px; background: #3a2a2a; border-left: 3px solid #ff9800; color: #ffb74d;"><strong>‚ö† Recommendation:</strong>${report.compatibility.recommendation}</div>`;}if(report.compatibility.status==='supported'){html+=`<div style="margin-top: 8px; font-size: 0.85em; color: #888;">Supported browsers:Chrome ${this.getMinimumVersions().Chrome}+,Edge ${this.getMinimumVersions().Edge}+,Opera ${this.getMinimumVersions().Opera}+</div>`;}html+=`</div>`;return html;}logToConsole(){const report=this.getReport();console.group('üåê Browser Detection Report');console.log('Browser:',report.browser.name,report.browser.version);console.log('OS:',report.browser.os);console.log('Engine:',report.browser.engine);console.log('Web Serial API:',report.compatibility.hasSerialAPI?'‚úì Available':'‚úó Not Available');console.log('Secure Context:',report.compatibility.isSecureContext?'‚úì Yes':'‚úó No');console.log('Status:',report.compatibility.status);console.log('Message:',report.compatibility.message);if(report.compatibility.recommendation){console.warn('Recommendation:',report.compatibility.recommendation);}console.groupEnd();}}